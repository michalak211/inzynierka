<!--http://forum.thymeleaf.org/jquery-thymeleaf-how-to-dynamically-add-forms-with-the-object-fields-td4031323.html-->


<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="fragments/header :: header-css"/>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<style>
    .bouble {
    / / layout position: relative;
        width: 100%;

    / / looks . bouble background-color: #fff;
        padding: 1.125em 1.5em;
        font-size: 1.25em;
        border-radius: 1rem;
        box-shadow: 0 0.125rem 0.5rem rgba(0, 0, 0, .3), 0 0.0625rem 0.125rem rgba(0, 0, 0, .2);
    }

    .bouble::before {
    / / layout content: '';
        position: absolute;
        width: 0;
        height: 0;
        bottom: 100%;
        left: 1.5em;
    / / offset should move with padding of parent border: .75 rem solid transparent;
        border-top: none;

    / / looks border-bottom-color: #fff;
        filter: drop-shadow(0 -0.0625rem 0.0625rem rgba(0, 0, 0, .1));
    }

</style>

<body>

<div th:replace="fragments/header :: header"/>

<div class="container">

    <div class="starter-template">

        <div class="container">
            <div th:if="${acces}">

                <div class="row">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <h3>Podgląd KWN</h3>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 col-sm-6 col-xs-12">
                        <div class="panel panel-default">
                            <div class="panel-heading clearfix">
                                <div class="col-md-12">
                                    <div class="row">
                                        <label class="col-md-9 control-label">KARTA WYROBU NIEZGODNEGO</label>
                                        <label class="col-md-1 control-label">Nr KWN:</label>
                                        <label class="col-md-2 control-label" th:text="${kwnForm.nrKwn}"></label>
                                    </div>
                                </div>

                            </div>

                            <div class="panel-body">
                                <form class="form-horizontal row-border" action="#" th:action="@{/kwn/add}"
                                      th:object="${kwnForm}" method="post">
                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div id="divCheckbox" style="display: none;">
                                                    <input th:field="*{nrKwn}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                                <label class="col-md-2 control-label">Nazwa wyrobu</label>
                                                <div class="col-md-6">
                                                    <input th:field="*{nazwaWyrobu}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>

                                                <label class="col-md-2 control-label">Obszar</label>
                                                <div class="col-md-2">
                                                    <input th:field="*{obszar}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">ilość</label>
                                                <div class="col-md-2">
                                                    <input th:field="*{ilosc}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                                <label class="col-md-2 control-label">typ</label>
                                                <div class="col-md-2">
                                                    <select th:field="*{typilosci}" class="form-control" disabled>
                                                        <option value=""> --</option>
                                                        <option value="sztuka">Sztuka</option>
                                                        <option value="arkusz">Arkusz</option>
                                                        <option value="paleta">Paleta</option>
                                                        <option value="partia">Partia</option>
                                                        <option value="rola">Rola</option>

                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Zgłaszający niezgodność:</label>
                                                <div class="col-md-3">
                                                    <input th:field="*{zglaszajacyNiezgodnosc}" type="text"
                                                           class="form-control" placeholder="" disabled>
                                                </div>

                                                <label class="col-md-1 control-label">Kom. org.</label>
                                                <div class="col-md-2">
                                                    <input th:field="*{komOrg}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>

                                                <label class="col-md-2 control-label">data zgłoszen.:</label>
                                                <div class="col-md-2">
                                                    <input th:field="*{dataZgloszenia}" type="date" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Numer zlecenia:</label>
                                                <div class="col-md-5">
                                                    <input th:field="*{nrZlecenia}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                    <span class="help-block">
                                                    <p class="text-danger">
                                                        Zlecenia muszą być oddzielone przecinkami
                                                    </p>
                                                </span>
                                                </div>
                                                <label class="col-md-3 control-label">Dział/Wydział</label>
                                                <div class="col-md-2">
                                                    <input th:field="*{dzialWydzial}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                    <span class="help-block">(miejsce wykrycia)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Wykryte na etapie:</label>
                                                <div class="col-md-4">
                                                    <input th:field="*{wykryteNaEtapie}" type="text"
                                                           class="form-control"
                                                           placeholder="" disabled>
                                                </div>


                                                <label class="col-md-2 control-label">Nr prot.odb.:</label>
                                                <div class="col-md-4">
                                                    <input th:field="*{nrPtotOdb}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Niezgodność dotyczy:</label>
                                                <div class="col-md-4">
                                                    <select th:field="*{niezgodnoscDotyczy}" class="form-control"
                                                            name="parent_selection" id="parent_selection" disabled>
                                                        <option value="">--</option>
                                                        <option value="dostawa">dostawa</option>
                                                        <option value="papier">papier</option>
                                                        <option value="offset">offset</option>
                                                        <option value="sitodruk">sitodruk</option>
                                                        <option value="staloryt">staloryt</option>
                                                        <option value="typografia">typografia</option>
                                                        <option value="injet">injet</option>
                                                        <option value="lakierowanie">lakierowanie</option>
                                                        <option value="hot stamping ">hot stamping</option>
                                                        <option value="krojenie">krojenie</option>
                                                        <option value="złamywanie">złamywanie</option>
                                                        <option value="szycie">szycie</option>
                                                        <option value="wykrawanie">wykrawanie</option>
                                                        <option value="nacinanie">nacinanie</option>
                                                        <option value="laminowanie">laminowanie</option>
                                                        <option value="chip/mikroprocesor">chip/mikroprocesor</option>
                                                        <option value="pakowanie">pakowanie</option>
                                                        <option value="sortowanie manualne">sortowanie manualne</option>
                                                        <option value="sortowanie maszynowe">sortowanie maszynowe
                                                        </option>
                                                        <option value="wymiana dobitek">wymiana dobitek</option>
                                                        <option value="nieokreślone">nieokreślone</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Cecha/element:</label>
                                                <div class="col-md-4">
                                                    <input th:field="*{cecha}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                                <label class="col-md-2 control-label">Opis niezgodności:</label>
                                                <div class="col-md-4">
                                                    <input th:field="*{opisNiezgodnosci}" type="text"
                                                           class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>


                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Dodatkowy opis
                                                    niezgodności:</label>
                                                <div class="col-md-10">
                                                <textarea th:field="*{dodatkowyOpisNiezgodnosci}" class="form-control"
                                                          rows="3" disabled></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Potencjalna przyczyna:</label>
                                                <div class="col-md-4">
                                                    <input th:field="*{rodzajPrzyczyny}" type="text"
                                                           class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Opis przyczyny:</label>
                                                <div class="col-md-10">
                                                <textarea th:field="*{potencjalnaPrzyczyna}" class="form-control"
                                                          rows="3" disabled></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Data spotkania Zespołu:</label>
                                                <div class="col-md-3">
                                                    <input th:field="*{dataSpotkaniaZ}" type="date" class="form-control"
                                                           placeholder="" disabled></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Decyzja Zespołu ds. KWN :</label>
                                                <div class="col-md-3">
                                                    <input th:field="*{decyzjaZKWN}" type="text" class="form-control"
                                                           placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Uzasadnienie decyzji:</label>
                                                <div class="col-md-10">
                                                <textarea th:field="*{uzasadnienie}" class="form-control"
                                                          rows="3" disabled></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <br>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Zadania</label>
                                                <div class="col-md-10">
                                                    <div style="display: grid;  grid-template-columns: 20px 1fr auto auto auto; align-items: center;"
                                                         th:each="task, status : ${kwnForm.tasks}">
                                                        <p th:if="${status.index} == 0"
                                                           style="margin-right: 15px; text-align: center">Nr</p>
                                                        <label style="text-align: center" th:if="${status.index} == 0">Treść
                                                            zadania</label>
                                                        <label th:if="${status.index} == 0">Termin realizacji</label>
                                                        <label style="text-align: center" th:if="${status.index} == 0">Osoba
                                                            odpowiedzialna</label>
                                                        <div th:if="${status.index} == 0">
                                                            <p></p>
                                                        </div>

                                                        <div style="margin-right: 15px; font-weight: bold;">
                                                            <p th:text="${status.index+1}"></p>
                                                        </div>
                                                        <div style="flex-grow: 1; margin-right: 15px;">
                                                        <textarea style="width: 500px; margin-bottom: 15px;"
                                                                  th:field="*{tasks[__${status.index}__].content}"
                                                                  class="form-control" rows="2" disabled></textarea>
                                                        </div>
                                                        <div style="width: 150px; align-items: center;">
                                                            <p style="text-align: center"
                                                               th:text="${#dates.format(task.deadLine, 'dd-MM-yyyy')}"></p>
                                                            <!--                                                            <input-->
                                                            <!--                                                                    th:text="${#dates.format(task.deadLine, 'dd-MM-yyyy')}"-->
                                                            <!--                                                                    type="text" class="form-control" placeholder=""-->
                                                            <!--                                                                    disabled>-->
                                                        </div>
                                                        <div style="width: 150px; align-items: center">
                                                            <p style="text-align: center;"
                                                               th:text="*{tasks[__${status.index}__].employee.firstAndLastName + ' (' + tasks[__${status.index}__].employee.department + ')'}"></p>
                                                            <!--                                                            <input th:field="*{tasks[__${status.index}__].employee.firstAndLastName} "-->
                                                            <!--                                                                   type="text" class="form-control" placeholder=""-->
                                                            <!--                                                                   disabled>-->
                                                        </div>
                                                        <div>
                                                            <span th:each="component : ${#authentication.getAuthorities()}"
                                                                  th:if="${component.getAuthority().equals('SG-RTAdmin')}">
                                                            <button type="button" class="btn btn-default"
                                                                    style="margin-left: 10px"
                                                                    th:onclick="'showMoreInfo('+${status.index}+')'">
                                                                Notatki
                                                            </button>
                                                            </span>
                                                        </div>
                                                        <div th:id="taskDiv_+ ${status.index}"
                                                             style="grid-column: 2 / span 3; margin-bottom: 20px;  margin-bottom: 15px; display: none">
                                                            <div th:each="component : ${#authentication.getAuthorities()}"
                                                                 th:if="${component.getAuthority().equals('SG-RTAdmin')} ">
                                                                <h3> Notatki do zadania </h3>
                                                                <p>Status zadania: <span
                                                                        th:text="*{tasks[__${status.index}__].status}"></span>
                                                                </p>
                                                                <div class="media"
                                                                     th:each="n, status : *{tasks[__${status.index}__].notes}">
                                                                    <div class="media-left">
                                                                        <a href="#">
                                                                            <img src="data:image/png;base64,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"
                                                                                 width="60" alt="woman"
                                                                                 class="media-object">
                                                                        </a>
                                                                    </div>
                                                                    <div class="media-body message">
                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading panel-heading-white">
                                                                                <div class="pull-right">
                                                                                    <small class="text-muted"
                                                                                           th:text="${#dates.format(n.getDate(), 'dd-MM-yyyy HH:mm')}"></small>
                                                                                </div>
                                                                                #<span
                                                                                    th:text="${status.index}+1"></span>
                                                                                dodane przez <span
                                                                                    th:text="${n.getEmployee().getFirstAndLastName()}"></span>
                                                                            </div>
                                                                            <div class="panel-body">
                                                                                <p class="text-break"
                                                                                   th:text="${n.getContent()}"></p>
                                                                                <div>
                                                                                    <a th:unless="${n.extention == null OR n.getExtention().equals('')}"
                                                                                       th:href="@{'/task/kwn/' +${task.getId()}+'/download/'+${status.index}}">
                                                                                        <p th:text="${n.fileName}"></p>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Zalecenia Zespołu:</label>
                                                <div class="col-md-10">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label"></label>
                                                <label class="col-md-4 control-label">Reklamować u
                                                    dostawcy/podwykonawcy:</label>
                                                <div class="col-md-2">
                                                    <select th:field="*{zzreklamowac}" class="form-control" disabled>
                                                        <option value=""> --</option>
                                                        <option value="tak">tak</option>
                                                        <option value="nie">nie</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label"></label>
                                                <label class="col-md-4 control-label">Uruchomić dzialania korygujące
                                                    (wg.
                                                    P-04):</label>
                                                <div class="col-md-2">
                                                    <select th:field="*{zzuruchomic}" class="form-control" disabled>
                                                        <option value=""> --</option>
                                                        <option value="tak">tak</option>
                                                        <option value="nie">nie</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label"></label>
                                                <label class="col-md-4 control-label">Osoba odpowiedzialna za działania
                                                    korygujące:</label>
                                                <div class="col-md-2">
                                                    <select th:field="*{osobaOdp}" id="osobaOdp"
                                                            class="form-control select-checkbox" disabled>
                                                        <th:block th:each="employee : ${employees}">
                                                            <option th:value="${employee.id}"
                                                                    th:text="${employee.getFirstAndLastName()} + ' &emsp; &emsp; (' + ${employee.getDepartment()} + ')' "/>
                                                        </th:block>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label"></label>
                                                <label class="col-md-4 control-label">Otworzyć zlecenie kosztowe
                                                    reklamacji:</label>
                                                <div class="col-md-2">
                                                    <select th:field="*{zzotworzyc}" class="form-control" disabled>
                                                        <option value=""> --</option>
                                                        <option value="tak">tak</option>
                                                        <option value="nie">nie</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Uwagi:</label>
                                                <div class="col-md-10">
                                                <textarea th:field="*{uwagi}" class="form-control" rows="3"
                                                          disabled></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Moderator spotkania</label>
                                                <div class="col-md-10">
                                                    <select th:field="*{moderator}" class="form-control select-checkbox"
                                                            disabled>
                                                        <th:block th:each="employee : ${employees}">
                                                            <option th:value="${employee.id}"
                                                                    th:text="${employee.getFirstAndLastName()} + ' &emsp; &emsp; (' + ${employee.getDepartment()} + ')' "/>
                                                        </th:block>
                                                    </select>

                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <label class="col-md-2 control-label">Lista osób</label>
                                                <div class="col-md-10">
                                                    <table id="PC" class=" table order-list">
                                                        <thead>
                                                        <tr>
                                                            <!--                                                        <td>Lp.</td>-->
                                                            <td>Imię i Nazwisko, Dział</td>
                                                        </tr>
                                                        </thead>
                                                        <tbody id='test123'>
                                                        <tr class="itemPC"
                                                            th:each="movie, status : ${kwnForm.tablePCDtos}">
                                                            <td class="col-sm-4">
                                                                <select th:field="*{tablePCDtos[__${status.index}__].employee}"
                                                                        class="form-control" disabled>
                                                                    <th:block th:each="employee : ${employees}">
                                                                        <option th:value="${employee.getId()}"
                                                                                th:text="${employee.getFirstAndLastName()} + ' &emsp; &emsp; (' + ${employee.getDepartment()} + ')' "/>
                                                                    </th:block>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        </tbody>

                                                        <tfoot>
                                                        <tr>
                                                            <!--                                   'tableTPDtos',['trybPostepowania', 'terminRealizacji', 'osobaOdpowiedzialna'], '.itemTP', 'terminRealizacji', 'TP'-->
                                                            <!--                                                            <td colspan="5" style="text-align: left;">-->
                                                            <!--                                                                <input type="button" class="btn btn-lg btn-block "-->
                                                            <!--                                                                       onclick="addInput('tablePCDtos', 'employee', '.itemPC', 'PC' )"-->
                                                            <!--                                                                       value="Dodaj kolejny wiersz"/>-->
                                                            <!--                                                            </td>-->
                                                        </tr>
                                                        <tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row end -->
            </div>
            <div class="alert alert-danger" role="alert" th:unless="${acces}">
                Brak dostępu do tego zasobu!
            </div>

        </div>
    </div>
</div>

<!-- /.container -->

<div th:replace="fragments/footer :: footer"/>

<script th:inline="javascript">

    const showMoreInfo = (param) => {
        var x = document.getElementById("taskDiv_" + param);
        x.style.display === "none" ? x.style.display = "block" : x.style.display = "none";
    }

    function deleteRowTask(id) {
        document.getElementById("TP").deleteRow(id);
    }

    function test() {

        console.log(document.getElementById("tablePCDtos0.id").value)
        console.log([[${employees}]])
    }

    var choices = [[${employees}]];
    console.log(choices)
    var c = 0;

    function addInput(listName, fieldName, rowIndexSelector, elementName) {

        let rowIndex = document.querySelectorAll(rowIndexSelector).length;
        let row = document.createElement('tr');
        row.classList.add(rowIndexSelector.substr(1));

//Create and append the options
        let selectList = document.createElement('select');
        for (var i = 0; i < choices.length; i++) {
            var option = document.createElement("option");
            option.value = choices[i].id;
            option.text = choices[i].firstAndLastName + "  (" + choices[i].department + ")";
            selectList.appendChild(option);
        }

        selectList.classList.add('form-control');

        let col = document.createElement('td');
        col.classList.add('col-sm-8');
        selectList.id = listName + rowIndex + '.' + fieldName;
        selectList.setAttribute('name', listName + '[' + rowIndex + '].' + fieldName);
        col.appendChild(selectList);
        row.appendChild(col);

        document.getElementById(elementName).appendChild(row);
    }

    //'tableTPDtos',['trybPostepowania', 'terminRealizacji', 'osobaOdpowiedzialna'], '.itemTP', 'terminRealizacji', 'TP'
    let addRow = function (listName, fieldsNames, rowIndexSelector, dataFieldName, elementName) {
        let rowIndex = document.querySelectorAll(rowIndexSelector).length;

        let row = document.createElement('tr');
        row.classList.add(rowIndexSelector.substr(1));


        fieldsNames.forEach((fieldName) => {
            let col = document.createElement('td');
            if (fieldName === dataFieldName) {
                col.classList.add('col-sm-2');
            } else {
                col.classList.add('col-sm-4');
            }

            let input = document.createElement('input');
            if (fieldName === dataFieldName) {
                input.type = 'date';
            } else {
                input.type = 'text';
            }

            input.classList.add('form-control');
            input.id = listName + rowIndex + '.' + fieldName;
            input.setAttribute('name', listName + '[' + rowIndex + '].' + fieldName);

            col.appendChild(input);
            row.appendChild(col);
        });

        let col = document.createElement('td');
        col.classList.add('col-sm-4');
        let selectList = document.createElement('select');
        for (var i = 0; i < choices.length; i++) {
            var option = document.createElement("option");
            option.value = choices[i].id;
            option.text = choices[i].firstAndLastName + "  (" + choices[i].department + ")";
            selectList.appendChild(option);
        }
        selectList.classList.add('form-control');
        selectList.id = listName + rowIndex + '.' + 'employee';
        selectList.setAttribute('name', listName + '[' + rowIndex + '].' + 'employee');
        col.appendChild(selectList);
        row.appendChild(col);


        document.getElementById(elementName).appendChild(row);
    };





    function list(array_list1, array_list2) {
        $("#child_selection1").html("");
        $(array_list1).each(function (i) {
            $("#child_selection1").append("<option value=\"" + array_list1[i].value + "\">" + array_list1[i].display + "</option>");
        });

        $("#child_selection2").html("");
        $(array_list2).each(function (i) {
            $("#child_selection2").append("<option value=\"" + array_list2[i].value + "\">" + array_list2[i].display + "</option>");
        });
    }


    // function calculateRow(row) {
    //     var price = +row.find('input[name^="price"]').val();
    //
    // }
    //
    // function calculateGrandTotal() {
    //     var grandTotal = 0;
    //     $("table.order-list").find('input[name^="price"]').each(function () {
    //         grandTotal += +$(this).val();
    //     });
    //     $("#grandtotal").text(grandTotal.toFixed(2));
    // }


</script>


</body>
</html>
